<!DOCTYPE html>

<html lang="pt-BR">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../style/NovaPesquisa.css">
        <title>Satisfying.you</title>
    </head>

    <body>

    <a href="Home.html">
        <div class="tituloPagina">
            <img class="icon-smile" src="../icons/smile-icon.png" alt="">
            <header>Satisfying.you</header>
        </div>   
    </a>
        <main>
            <div class="container">
                <form>
                    <h2 class="tituloForm">Criar nova pesquisa de satisfação</h2>
                    
                    <div class="form-group">
                        <label for="txtNomePesquisa">Nome da pesquisa</label><br>
                        <input type="text" id="txtNomePesquisa" name="nomePesquisa" placeholder="Carnaval 2023"><br>
                    </div>
                    
                    <div class="form-group">
                        <label for="dtPesquisa">Data</label><br>
                        <input type="text" id="dtPesquisa" name="dataPesq" placeholder="22/03/2023"><br>
                    </div>
        
                    <div class="form-group">
                        <label for="imgPesquisa">Imagem</label><br>
                        <input type="file" id="imgPesquisa" name="imgPesq"><br>    
                    </div>
        
                    <div class="containerImg">
                        <img src="../assets/mascara.png" alt="">
                    </div>

                    <div class="containerCriar">
                        <input type="button" value="Criar" onclick="cadastrarPesquisa()">
                    </div>
                </form>
            </div>
        </main>

        
        <script>
            // // ainda não está funcionando :
            // function cadastrarPesquisa(){
            //     var nomePesquisa = document.getElementById('txtNomePesquisa').value;
            //     var dataPesquisa = document.getElementById('dtPesquisa').value;
            //     var imagemPesquisa =document.getElementById('imgPesquisa').value;

            //     var novaPesquisa = {
            //         nomePesquisa: nomePesquisa,
            //         dataPesquisa: dataPesquisa,
            //         imagemPesquisa: imagemPesquisa
            //     };
                
            //     //converter um objeto js para uma string JSON
            //     var pesquisas = JSON.parse(localStorage.getItem('pesquisas'))
            //     //adicionar uma nova pesquisa na string JSON
            //     pesquisas.push(novaPesquisa);
            //     //armazenar no localStorage
            //     localStorage.setItem('pesquisas', JSON.stringify(novaPesquisa))
            //     window.location.href = 'Home.html';
            // }

            function cadastrarPesquisa(){

                var nomePesquisa = document.getElementById('txtNomePesquisa').value;
                var dataPesquisa = document.getElementById('dtPesquisa').value;
                var imagemPesquisa = document.getElementById('imgPesquisa').value;
                
                //criação do objeto
                var novaPesquisa = {
                    nomePesquisa: nomePesquisa,
                    dataPesquisa: dataPesquisa,
                    imagemPesquisa: imagemPesquisa
                };

                // Recupera a lista de pesquisas do localStorage
                var listaPesquisas = JSON.parse(localStorage.getItem('listaPesquisas')) || [];

                // Adiciona a nova pesquisa à lista
                listaPesquisas.push(novaPesquisa);
                

                // Armazena a lista atualizada no localStorage
                localStorage.setItem('listaPesquisas', JSON.stringify(listaPesquisas));

                window.location.href = 'Home.html';

            }
        </script>
    </body>


</html>